-- 创建地区数据表
USE pro_electrician;

-- 地区表
CREATE TABLE IF NOT EXISTS regions (
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '地区ID',
    code VARCHAR(20) NOT NULL COMMENT '地区编码',
    name VARCHAR(50) NOT NULL COMMENT '地区名称',
    parent_code VARCHAR(20) DEFAULT NULL COMMENT '父级地区编码',
    level TINYINT NOT NULL COMMENT '级别：1省份，2城市，3区县',
    sort_order INT DEFAULT 0 COMMENT '排序',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_code (code),
    INDEX idx_parent_code (parent_code),
    INDEX idx_level (level)
) COMMENT='地区表';

-- 插入省份数据
INSERT INTO regions (code, name, parent_code, level, sort_order) VALUES
('110000', '北京市', NULL, 1, 1),
('120000', '天津市', NULL, 1, 2),
('130000', '河北省', NULL, 1, 3),
('140000', '山西省', NULL, 1, 4),
('150000', '内蒙古自治区', NULL, 1, 5),
('210000', '辽宁省', NULL, 1, 6),
('220000', '吉林省', NULL, 1, 7),
('230000', '黑龙江省', NULL, 1, 8),
('310000', '上海市', NULL, 1, 9),
('320000', '江苏省', NULL, 1, 10),
('330000', '浙江省', NULL, 1, 11),
('340000', '安徽省', NULL, 1, 12),
('350000', '福建省', NULL, 1, 13),
('360000', '江西省', NULL, 1, 14),
('370000', '山东省', NULL, 1, 15),
('410000', '河南省', NULL, 1, 16),
('420000', '湖北省', NULL, 1, 17),
('430000', '湖南省', NULL, 1, 18),
('440000', '广东省', NULL, 1, 19),
('450000', '广西壮族自治区', NULL, 1, 20),
('460000', '海南省', NULL, 1, 21),
('500000', '重庆市', NULL, 1, 22),
('510000', '四川省', NULL, 1, 23),
('520000', '贵州省', NULL, 1, 24),
('530000', '云南省', NULL, 1, 25),
('540000', '西藏自治区', NULL, 1, 26),
('610000', '陕西省', NULL, 1, 27),
('620000', '甘肃省', NULL, 1, 28),
('630000', '青海省', NULL, 1, 29),
('640000', '宁夏回族自治区', NULL, 1, 30),
('650000', '新疆维吾尔自治区', NULL, 1, 31);

-- 插入部分城市数据（以北京、上海、广东为例）
INSERT INTO regions (code, name, parent_code, level, sort_order) VALUES
-- 北京市
('110100', '北京市', '110000', 2, 1),
-- 上海市
('310100', '上海市', '310000', 2, 1),
-- 广东省城市
('440100', '广州市', '440000', 2, 1),
('440300', '深圳市', '440000', 2, 2),
('440400', '珠海市', '440000', 2, 3),
('440500', '汕头市', '440000', 2, 4),
('440600', '佛山市', '440000', 2, 5),
('440700', '江门市', '440000', 2, 6),
('440800', '湛江市', '440000', 2, 7),
('440900', '茂名市', '440000', 2, 8),
('441200', '肇庆市', '440000', 2, 9),
('441300', '惠州市', '440000', 2, 10),
('441400', '梅州市', '440000', 2, 11),
('441500', '汕尾市', '440000', 2, 12),
('441600', '河源市', '440000', 2, 13),
('441700', '阳江市', '440000', 2, 14),
('441800', '清远市', '440000', 2, 15),
('441900', '东莞市', '440000', 2, 16),
('442000', '中山市', '440000', 2, 17),
('445100', '潮州市', '440000', 2, 18),
('445200', '揭阳市', '440000', 2, 19),
('445300', '云浮市', '440000', 2, 20);

-- 插入部分区县数据（以广州市为例）
INSERT INTO regions (code, name, parent_code, level, sort_order) VALUES
('440103', '荔湾区', '440100', 3, 1),
('440104', '越秀区', '440100', 3, 2),
('440105', '海珠区', '440100', 3, 3),
('440106', '天河区', '440100', 3, 4),
('440111', '白云区', '440100', 3, 5),
('440112', '黄埔区', '440100', 3, 6),
('440113', '番禺区', '440100', 3, 7),
('440114', '花都区', '440100', 3, 8),
('440115', '南沙区', '440100', 3, 9),
('440117', '从化区', '440100', 3, 10),
('440118', '增城区', '440100', 3, 11);

-- 插入深圳市区县数据
INSERT INTO regions (code, name, parent_code, level, sort_order) VALUES
('440303', '罗湖区', '440300', 3, 1),
('440304', '福田区', '440300', 3, 2),
('440305', '南山区', '440300', 3, 3),
('440306', '宝安区', '440300', 3, 4),
('440307', '龙岗区', '440300', 3, 5),
('440308', '盐田区', '440300', 3, 6),
('440309', '龙华区', '440300', 3, 7),
('440310', '坪山区', '440300', 3, 8),
('440311', '光明区', '440300', 3, 9);

SELECT '✅ 地区数据表创建完成' as result;
SELECT '📍 省份数量:' as info, COUNT(*) as count FROM regions WHERE level = 1;
SELECT '🏙️ 城市数量:' as info, COUNT(*) as count FROM regions WHERE level = 2;
SELECT '🏘️ 区县数量:' as info, COUNT(*) as count FROM regions WHERE level = 3;