
# 功能模块与对应接口
更新日期：2025-10-18

## 小程序端

### 用户认证模块【测试通过10.16】

- 发送验证码： POST /api/auth/send-code
- 用户登录/注册： POST /api/auth/login
- 获取用户信息： GET /api/auth/userinfo
- 更新用户信息： PUT /api/auth/profile
- 切换用户角色： POST /api/auth/switch-role
- 刷新token： POST /api/auth/refresh-token
- 用户登出： POST /api/auth/logout
- 验证token： GET /api/auth/verify-token

### 用户资料模块【测试通过10.16】

- 获取用户资料： GET /api/users/profile
- 更新用户资料： PUT /api/users/profile

### 电工认证模块【测试通过10.16】

- 提交电工认证申请： POST /api/electricians/certification【测试通过】
- 获取认证状态： GET /api/electricians/certification/status【测试通过】

### 地址管理模块

- 添加地址： POST /api/addresses
- 获取地址列表： GET /api/addresses
- 获取地址详情： GET /api/addresses/:id
- 更新地址： PUT /api/addresses/:id
- 删除地址： DELETE /api/addresses/:id
- 设置默认地址： PUT /api/addresses/:id/default

### 消息模块

- 获取用户消息列表： GET /api/messages
- 获取消息详情： GET /api/messages/:id
- 标记消息为已读： PUT /api/messages/:id/read
- 获取未读消息数量： GET /api/messages/unread/count

### 订单模块

- 创建工单： POST /api/orders【测试通过】
- 获取工单列表： GET /api/orders【测试通过】
- 获取工单详情： GET /api/orders/:id【测试通过】
- 电工抢单： POST /api/orders/:id/take【测试通过】
- 电工修改订单内容和金额： PUT /api/orders/:id/update【新增】
- 用户确认订单修改： POST /api/orders/:id/confirm-update【新增】
- 用户确认工单： POST /api/orders/:id/confirm【测试通过】
- 完成服务： POST /api/orders/:id/complete
- 发起取消订单请求： POST /api/orders/:id/initiate-cancel【新增】
- 确认取消订单： POST /api/orders/:id/confirm-cancel【新增】
- 获取工单统计： GET /api/orders/stats/summary

### 支付模块

- 创建支付订单： POST /api/payments
- 测试支付确认： POST /api/payments/test/confirm
- 微信支付回调： POST /api/payments/wechat/notify
- 查询支付状态： GET /api/payments/:payment_no
- 获取支付列表： GET /api/payments
- 获取支付统计： GET /api/payments/stats/summary
- 申请退款： POST /api/payments/:payment_no/refund



#=## PC后台管理

### 管理员模块

- 管理员登录： POST /api/admin/auth/login
- 获取管理员信息： GET /api/admin/auth/info
- 管理员登出： POST /api/admin/logout

### 用户管理

- 获取用户列表： GET /api/admin/users
- 获取用户详情： GET /api/admin/users/:id
- 修改用户状态： PUT /api/admin/users/:id/status

### 电工管理

- 获取电工列表： GET /api/admin/electricians
- 获取电工详情： GET /api/admin/electricians/:id
- 审核电工认证： PUT /api/admin/electricians/:id/review
- 修改电工状态： PUT /api/admin/electricians/:id/status

### 订单管理

- 获取订单列表： GET /api/admin/orders
- 获取订单详情： GET /api/admin/orders/:id
- 更新订单状态： PUT /api/admin/orders/:id/status
- 处理退款申请： PUT /api/payments/:payment_no/refund

### 数据统计

- 获取平台统计数据： GET /api/admin/statistics

### 系统通知管理

- 获取通知列表： GET /api/admin/messages
- 创建系统通知： POST /api/admin/messages
- 获取通知详情： GET /api/admin/messages/:id
- 更新系统通知： PUT /api/admin/messages/:id
- 删除系统通知： DELETE /api/admin/messages/:id