<!--pages/order/create/create.wxml-->
<view class="container">
  <!-- 服务类型选择 -->
  <view class="section">
    <view class="section-title">选择服务类型</view>
    <view class="service-types">
      <view 
        class="service-type-item {{selectedServiceType && selectedServiceType.id === item.id ? 'selected' : ''}}"
        wx:for="{{serviceTypes}}"
        wx:key="id"
        data-index="{{index}}"
        bindtap="selectServiceType"
      >
        <text class="service-icon">{{item.icon}}</text>
        <text class="service-name">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- 问题描述 -->
  <view class="section">
    <view class="section-title">问题描述</view>
    <textarea 
      class="description-input"
      placeholder="请详细描述您遇到的问题，以便电工更好地为您服务"
      value="{{description}}"
      bindinput="onDescriptionInput"
      maxlength="200"
      show-confirm-bar="{{false}}"
    ></textarea>
    <view class="char-count">{{description.length}}/200</view>
  </view>

  <!-- 图片上传 -->
  <view class="section">
    <view class="section-title">上传图片（选填）</view>
    <view class="image-upload">
      <view 
        class="image-item"
        wx:for="{{images}}"
        wx:key="*this"
        data-index="{{index}}"
        bindtap="previewImage"
      >
        <image src="{{item}}" mode="aspectFill"></image>
        <view class="delete-btn" data-index="{{index}}" catchtap="deleteImage">×</view>
      </view>
      <view 
        class="add-image-btn"
        wx:if="{{images.length < 3}}"
        bindtap="chooseImage"
      >
        <text class="add-icon">+</text>
        <text class="add-text">添加图片</text>
      </view>
    </view>
  </view>

  <!-- 服务地址 -->
  <view class="section">
    <view class="section-title">服务地址</view>
    <view class="address-selector" bindtap="selectAddress">
      <view wx:if="{{selectedAddress}}" class="selected-address">
        <view class="address-info">
          <text class="address-name">{{selectedAddress.contactName}}</text>
          <text class="address-phone">{{selectedAddress.contactPhone}}</text>
        </view>
        <view class="address-detail">{{selectedAddress.fullAddress}}</view>
      </view>
      <view wx:else class="address-placeholder">
        <text>请选择服务地址</text>
      </view>
      <text class="arrow">></text>
    </view>
  </view>

  <!-- 联系信息 -->
  <view class="section">
    <view class="section-title">联系信息</view>
    <view class="contact-info">
      <view class="input-row">
        <text class="label">联系人</text>
        <input 
          class="input"
          placeholder="请输入联系人姓名"
          value="{{contactName}}"
          bindinput="onContactNameInput"
        />
      </view>
      <view class="input-row">
        <text class="label">联系电话</text>
        <input 
          class="input"
          placeholder="请输入联系电话"
          value="{{contactPhone}}"
          bindinput="onContactPhoneInput"
          type="number"
        />
      </view>
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-section">
    <button 
      class="submit-btn {{submitting ? 'disabled' : ''}}"
      bindtap="submitOrder"
      disabled="{{submitting}}"
    >
      {{submitting ? '提交中...' : '提交订单'}}
    </button>
  </view>
</view>