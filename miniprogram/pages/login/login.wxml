<!--pages/login/login.wxml-->
<view class="page-container">
  <!-- 头部区域 -->
  <view class="header">
    <view class="logo">
      <text class="logo-icon">⚡</text>
    </view>
    <text class="title">电工维修</text>
    <text class="subtitle">专业电工，快速上门</text>
  </view>

  <!-- 登录表单 -->
  <view class="login-form">
    <view class="form-title">手机号登录</view>
    <view class="form-subtitle">输入手机号码，获取验证码</view>
    
    <!-- 手机号输入 -->
    <view class="form-group">
      <view class="form-label">手机号码</view>
      <view class="input-group">
        <input 
          class="form-input" 
          type="number" 
          placeholder="请输入手机号码" 
          value="{{phone}}" 
          bindinput="onPhoneInput"
          maxlength="11"
        />
      </view>
      <text class="error-text" wx:if="{{phoneError}}">{{phoneError}}</text>
    </view>

    <!-- 验证码输入 -->
    <view class="form-group">
      <view class="form-label">验证码</view>
      <view class="input-group">
        <input 
          class="form-input code-input" 
          type="number" 
          placeholder="请输入验证码" 
          value="{{code}}" 
          bindinput="onCodeInput"
          maxlength="6"
        />
        <button 
          class="send-code-btn {{canSendCode ? '' : 'disabled'}}" 
          bindtap="sendCode"
          disabled="{{!canSendCode}}"
        >
          {{codeButtonText}}
        </button>
      </view>
      <text class="error-text" wx:if="{{codeError}}">{{codeError}}</text>
    </view>

    <view class="login-btn {{canLogin ? '' : 'disabled'}}" bindtap="login">
      {{loginButtonText}}
    </view>

    <!-- 测试环境提示 -->
    <view class="test-tip" wx:if="{{showTestTip}}">
      <view class="tip-title">测试环境</view>
      <view class="tip-content">验证码：{{testCode}}</view>
    </view>

      <!-- 协议条款 -->
  <view class="agreement">
    <view class="agreement-text">
      登录即表示同意
      <text class="link" bindtap="showPrivacyPolicy">《隐私政策》</text>
      和
      <text class="link" bindtap="showUserAgreement">《用户协议》</text>
    </view>
  </view>
  </view>



  <!-- 其他登录方式 -->


  <!-- 底部信息 -->
  <view class="footer">
    <view class="footer-text">客服电话：400-123-4567</view>
    <view class="footer-text">工作时间：9:00-18:00</view>
  </view>
</view>

<!-- 协议弹窗 -->
<view class="modal" wx:if="{{showModal}}" bindtap="hideModal">
  <view class="modal-content" catchtap="">
    <view class="modal-header">
      <text class="modal-title">{{modalTitle}}</text>
      <image class="close-icon" src="/images/icons/close.png" bindtap="hideModal"></image>
    </view>
    <scroll-view class="modal-body" scroll-y>
      <text class="modal-text">{{modalContent}}</text>
    </scroll-view>
    <view class="modal-footer">
      <view class="modal-btn" bindtap="hideModal">我知道了</view>
    </view>
  </view>
</view>