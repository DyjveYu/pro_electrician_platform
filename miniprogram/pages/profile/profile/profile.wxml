<!--pages/profile/profile/profile.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-header">
      <view class="avatar-section" bindtap="previewAvatar">
        <image class="avatar" src="{{userInfo.avatar || '/assets/default-avatar.png'}}" />
       
        <view class="role-badge {{currentRole}}">
          {{currentRole === 'electrician' ? 'ç”µå·¥' : 'ç”¨æˆ·'}}
        </view>
      </view>
      
      <view class="user-info">
     
         <text class="nickname">{{userInfo.nickname || userInfo.phone}}</text>
          
       <!-- ç”µå·¥è®¤è¯çŠ¶æ€ï¼šå¯¹æ‰€æœ‰ç”¨æˆ·å¯è§ï¼Œç”¨ certificationStatusText æ˜¾ç¤ºå½“å‰çŠ¶æ€ -->
 
      </view>
    </view>
    
    <!-- ç»Ÿè®¡æ•°æ® -->
    <view class="stats-section">
      <view class="stat-item">
        <text class="stat-number">{{stats.totalOrders}}</text>
        <text class="stat-label">{{currentRole === 'electrician' ? 'æ¥å•æ•°' : 'ä¸‹å•æ•°'}}</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.completedOrders}}</text>
        <text class="stat-label">å·²å®Œæˆ</text>
      </view>
      <view class="stat-item" wx:if="{{currentRole === 'electrician'}}">
        <text class="stat-number">{{stats.rating || '0.0'}}</text>
        <text class="stat-label">è¯„åˆ†</text>
      </view>
      <view class="stat-item" wx:if="{{currentRole === 'user'}}">
        <text class="stat-number">Â¥{{stats.totalAmount || '0'}}</text>
        <text class="stat-label">æ€»æ¶ˆè´¹</text>
      </view>
    </view>
  </view>

  <!-- ç”µå·¥ä¿¡æ¯å¡ç‰‡ 
  <view class="electrician-card" wx:if="{{currentRole === 'electrician' && electricianInfo}}">
    <view class="card-title">ç”µå·¥ä¿¡æ¯</view>
    <view class="electrician-info">
      <view class="info-row">
        <text class="label">çœŸå®å§“åï¼š</text>
        <text class="value">{{electricianInfo.realName}}</text>
      </view>
      <view class="info-row">
        <text class="label">ç”µå·¥è¯å·ï¼š</text>
        <text class="value">{{electricianInfo.certificateNumber}}</text>
      </view>
      <view class="info-row">
        <text class="label">è¯ä¹¦æœ‰æ•ˆæœŸï¼š</text>
        <text class="value">{{electricianInfo.certificateExpiry}}</text>
      </view>
      <view class="info-row">
        <text class="label">æœåŠ¡åŒºåŸŸï¼š</text>
        <text class="value">{{electricianInfo.serviceArea}}</text>
      </view>
    </view>
  </view>
-->
  <!-- èœå•åˆ—è¡¨ -->
  <view class="menu-section">
    <!-- åœ°å€ç®¡ç† -->
    <view 
      class="menu-item"
      wx:if="{{currentRole === 'user'}}"
      data-item="{{menuItems[0]}}"
      bindtap="onMenuItemTap"
    >
      <view class="menu-icon">ğŸ“</view>
      <view class="menu-content">
        <text class="menu-title">åœ°å€ç®¡ç†</text>
        <text class="menu-desc">ç®¡ç†å¸¸ç”¨åœ°å€</text>
      </view>
      <text class="menu-arrow">></text>
    </view>

    <!-- ç”µå·¥è®¤è¯ -->
    <view 
      class="menu-item"
      bindtap="handleCertification"
    >
      <view class="menu-icon">ğŸ”§</view>
      <view class="menu-content">
        <text class="menu-title">ç”µå·¥è®¤è¯</text>
        <text class="menu-desc">{{userInfo.isElectrician ? 'æŸ¥çœ‹è®¤è¯ä¿¡æ¯' : 'ç”³è¯·æˆä¸ºç”µå·¥'}}</text>
      </view>
      <view class="certification-badge">
       <text class="badge-text {{userInfo.certificationStatus === 'approved' ? 'certified' : (userInfo.certificationStatus === 'pending' ? 'pending' : 'uncertified')}}">{{certificationStatusText}}</text>
      </view>
      <text class="menu-arrow">></text>
    </view>

    <!-- ç¼–è¾‘èµ„æ–™ -->
    <view 
      class="menu-item"
      bindtap="navigateToEdit"
    >
      <view class="menu-icon">âœï¸</view>
      <view class="menu-content">
        <text class="menu-title">ç¼–è¾‘èµ„æ–™</text>
        <text class="menu-desc">ä¿®æ”¹ä¸ªäººä¿¡æ¯</text>
      </view>
      <text class="menu-arrow">></text>
    </view>

    <!-- è§’è‰²åˆ‡æ¢ -->
    <view 
      class="menu-item"
      bindtap="navigateToSwitchRole"
    >
      <view class="menu-icon">ğŸ”„</view>
      <view class="menu-content">
        <text class="menu-title">è§’è‰²åˆ‡æ¢</text>
        <text class="menu-desc">åˆ‡æ¢ç”¨æˆ·/ç”µå·¥èº«ä»½</text>
      </view>
      <text class="menu-arrow">></text>
    </view>
  </view>

  <!-- å…¶ä»–åŠŸèƒ½ -->
  <view class="menu-section">
    <view 
      class="menu-item"
      bindtap="navigateToSettings"
    >
      <view class="menu-icon">âš™ï¸</view>
      <view class="menu-content">
        <text class="menu-title">è®¾ç½®</text>
        <text class="menu-desc">é€šçŸ¥ã€éšç§ç­‰è®¾ç½®</text>
      </view>
      <text class="menu-arrow">></text>
    </view>

    <view 
      class="menu-item"
      bindtap="navigateToAbout"
    >
      <view class="menu-icon">â„¹ï¸</view>
      <view class="menu-content">
        <text class="menu-title">å…³äºæˆ‘ä»¬</text>
        <text class="menu-desc">ç‰ˆæœ¬ä¿¡æ¯ã€è”ç³»æ–¹å¼</text>
      </view>
      <text class="menu-arrow">></text>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section">
    <button class="logout-btn" bindtap="logout">
      é€€å‡ºç™»å½•
    </button>
  </view>
</view>