<!--pages/profile/edit/edit.wxml-->
<view class="container">
  <!-- 头像设置 -->
  <view class="section">
    <view class="section-title">头像</view>
    <view class="avatar-section" bindtap="chooseAvatar">
      <image 
        class="avatar"
        src="{{userInfo.avatar || '/images/default-avatar.png'}}"
        mode="aspectFill"
      ></image>
      <view class="avatar-overlay">
        <text class="upload-text">{{uploading ? '上传中...' : '点击更换'}}</text>
      </view>
    </view>
  </view>

  <!-- 基本信息 -->
  <view class="section">
    <view class="section-title">基本信息</view>
    
    <view class="form-item">
      <text class="label">手机号</text>
      <text class="value readonly">{{userInfo.phone}}</text>
    </view>
    
    <view class="form-item">
      <text class="label">昵称</text>
      <input 
        class="input"
        placeholder="请输入昵称"
        value="{{userInfo.nickname}}"
        bindinput="onNicknameInput"
        maxlength="20"
      />
    </view>
  </view>

  <!-- 保存按钮 -->
  <view class="save-section">
    <button 
      class="save-btn {{saving ? 'disabled' : ''}}"
      bindtap="saveUserInfo"
      disabled="{{saving}}"
    >
      {{saving ? '保存中...' : '保存'}}
    </button>
  </view>
</view>